package com.cog.controller;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.cog.dto.BookDto;
import com.cog.service.BookService;

//search?category&C&price&publisher
@RequestMapping("/digitalbooks/books")
@RestController
@CrossOrigin
public class BookController {

	@Autowired
	BookService bookService;
	private static final Logger LOGGER = LoggerFactory.getLogger(BookController.class);

	@GetMapping("/search/{category}/{author}/{price}/{publisher}")
	List<BookDto> getFilteredBooks(@PathVariable String category,@PathVariable Integer author,@PathVariable BigDecimal price,@PathVariable String publisher) {
		LOGGER.info("getFilteredBooks");
		return bookService.getFilteredBooks(category,author,price,publisher);
	}
	@GetMapping("/")
	Map<String,List<String>> getDistinctAuthorsRoleList(){
		LOGGER.info("getDistinctAuthorsRoleList");
		return bookService.getDistinctAuthorsRoleList();
	}
}
